services:
  mmrelay:
    image: ghcr.io/jeremiah-k/mmrelay:latest
    container_name: meshtastic-matrix-relay
    restart: unless-stopped
    user: "${UID:-1000}:${GID:-1000}"
    volumes:
      # Mount your config directory - create ~/.mmrelay/config.yaml first
      # See docs/DOCKER.md for setup instructions
      # For SELinux systems (RHEL/CentOS/Fedora), add :Z flag to prevent permission denied errors
      - ${MMRELAY_HOME:-$HOME}/.mmrelay/config.yaml:/app/config.yaml:ro,Z
      - ${MMRELAY_HOME:-$HOME}/.mmrelay:/app/data:Z
      # For non-SELinux systems, you can use:
      # - ${MMRELAY_HOME:-$HOME}/.mmrelay/config.yaml:/app/config.yaml:ro
      # - ${MMRELAY_HOME:-$HOME}/.mmrelay:/app/data
      # Tip: ensure MMRELAY_HOME is exported or present in .env
