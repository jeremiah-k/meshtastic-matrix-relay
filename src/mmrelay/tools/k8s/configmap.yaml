apiVersion: v1
kind: ConfigMap
metadata:
  name: mmrelay-config
  namespace: { { NAMESPACE } }
  labels:
    app: mmrelay
data:
  config.yaml: |
    # This ConfigMap contains a basic MMRelay configuration
    # You can customize this further based on your needs
    # See https://github.com/jeremiah-k/meshtastic-matrix-relay for full documentation

    matrix:
      # Matrix credentials will be provided via environment variables from Secret
      # Set MMRELAY_MATRIX_HOMESERVER, MMRELAY_MATRIX_BOT_USER_ID, MMRELAY_MATRIX_PASSWORD
      homeserver: https://matrix.example.org  # Replace with your Matrix homeserver
      bot_user_id: "@bot:example.org"  # Replace with your bot user ID

    matrix_rooms:
      - id: "#room:example.org"  # Replace with your Matrix room
        meshtastic_channel: 0

    meshtastic:
      connection_type: {{CONNECTION_TYPE}}
      host: {{MESHTASTIC_HOST}}  # Only used for TCP connections
      serial_port: {{SERIAL_DEVICE}}  # Only used for serial connections
      meshnet_name: My Meshnet
      broadcast_enabled: true
      message_interactions:
        reactions: false
        replies: false

    logging:
      level: info

    # Uncomment to enable E2EE (requires credentials.json)
    #  e2ee:
    #    enabled: {{E2EE_ENABLED}}

    plugins:
      ping:
        active: true
      weather:
        active: true
        units: metric
      nodes:
        active: true
